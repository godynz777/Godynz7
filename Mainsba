-- Flee the Facility ESP com painel estiloso, bot√£o "X" e arrast√°vel

-- Criar interface
local ScreenGui = Instance.new("ScreenGui", game.Players.LocalPlayer:WaitForChild("PlayerGui"))
ScreenGui.Name = "ESP_UI"
ScreenGui.ResetOnSpawn = false

-- Criar painel
local Frame = Instance.new("Frame", ScreenGui)
Frame.Size = UDim2.new(0, 200, 0, 180)
Frame.Position = UDim2.new(0, 50, 0, 100)
Frame.BackgroundColor3 = Color3.fromRGB(15, 15, 20)
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Draggable = true -- Deixa arrast√°vel

-- Neon roxo discreto
local UIStroke = Instance.new("UIStroke", Frame)
UIStroke.Thickness = 2
UIStroke.Color = Color3.fromRGB(180, 0, 255)
UIStroke.Transparency = 0.4 -- suave

-- T√≠tulo
local Title = Instance.new("TextLabel", Frame)
Title.Text = "ESP MENU"
Title.Size = UDim2.new(1, 0, 0, 30)
Title.BackgroundTransparency = 1
Title.TextColor3 = Color3.fromRGB(180, 0, 255)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 18

-- Bot√£o "X" pra fechar
local Close = Instance.new("TextButton", Frame)
Close.Text = "‚úï"
Close.Size = UDim2.new(0, 30, 0, 30)
Close.Position = UDim2.new(1, -30, 0, 0)
Close.BackgroundColor3 = Color3.fromRGB(40, 0, 60)
Close.TextColor3 = Color3.fromRGB(255, 255, 255)
Close.Font = Enum.Font.GothamBold
Close.TextSize = 20
Close.BorderSizePixel = 0
Close.AutoButtonColor = true

-- Esconder/mostrar painel
Close.MouseButton1Click:Connect(function()
	Frame.Visible = false
	local openBtn = Instance.new("TextButton", ScreenGui)
	openBtn.Text = "üëÅ‚Äçüó®"
	openBtn.Size = UDim2.new(0, 40, 0, 40)
	openBtn.Position = UDim2.new(0, 10, 0, 10)
	openBtn.BackgroundColor3 = Color3.fromRGB(30, 0, 50)
	openBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
	openBtn.Font = Enum.Font.GothamBold
	openBtn.TextSize = 20
	openBtn.BorderSizePixel = 0

	openBtn.MouseButton1Click:Connect(function()
		Frame.Visible = true
		openBtn:Destroy()
	end)
end)

-- Criar bot√£o de ESP da Beast
local BeastESPBtn = Instance.new("TextButton", Frame)
BeastESPBtn.Size = UDim2.new(1, -20, 0, 40)
BeastESPBtn.Position = UDim2.new(0, 10, 0, 50)
BeastESPBtn.BackgroundColor3 = Color3.fromRGB(30, 0, 50)
BeastESPBtn.Text = "ESP BEAST: OFF"
BeastESPBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
BeastESPBtn.Font = Enum.Font.GothamBold
BeastESPBtn.TextSize = 16
BeastESPBtn.BorderSizePixel = 0

-- Criar bot√£o de ESP dos Computadores
local ComputerESPBtn = Instance.new("TextButton", Frame)
ComputerESPBtn.Size = UDim2.new(1, -20, 0, 40)
ComputerESPBtn.Position = UDim2.new(0, 10, 0, 100)
ComputerESPBtn.BackgroundColor3 = Color3.fromRGB(30, 0, 50)
ComputerESPBtn.Text = "ESP PC: OFF"
ComputerESPBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
ComputerESPBtn.Font = Enum.Font.GothamBold
ComputerESPBtn.TextSize = 16
ComputerESPBtn.BorderSizePixel = 0

-- Fun√ß√£o de Highlight
local function highlightObject(obj, color)
	if obj:FindFirstChild("ESP_HL") then return end
	local hl = Instance.new("Highlight", obj)
	hl.Name = "ESP_HL"
	hl.FillColor = color
	hl.OutlineColor = Color3.new(0, 0, 0)
	hl.FillTransparency = 0.4
end

-- Ativar/desativar ESP da Beast
local beastOn = false
BeastESPBtn.MouseButton1Click:Connect(function()
	beastOn = not beastOn
	BeastESPBtn.Text = "ESP BEAST: " .. (beastOn and "ON" or "OFF")
	for _, player in ipairs(game.Players:GetPlayers()) do
		if player.Character and player.Character:FindFirstChild("Humanoid") then
			local tag = player:FindFirstChild("PlayerGui"):FindFirstChild("GameTag")
			if tag and tag.Text:lower():find("beast") then
				if beastOn then
					highlightObject(player.Character, Color3.fromRGB(255, 0, 0))
				else
					if player.Character:FindFirstChild("ESP_HL") then
						player.Character:FindFirstChild("ESP_HL"):Destroy()
					end
				end
			end
		end
	end
end)

-- Ativar/desativar ESP dos Computadores
local pcOn = false
ComputerESPBtn.MouseButton1Click:Connect(function()
	pcOn = not pcOn
	ComputerESPBtn.Text = "ESP PC: " .. (pcOn and "ON" or "OFF")
	for _, obj in ipairs(workspace:GetDescendants()) do
		if obj.Name:lower():find("computer") and obj:IsA("Model") then
			if pcOn then
				highlightObject(obj, Color3.fromRGB(0, 100, 255))
			else
				if obj:FindFirstChild("ESP_HL") then
					obj:FindFirstChild("ESP_HL"):Destroy()
				end
			end
		end
	end
end)
