-- Gody Hub - ESP com Highlight e Team Check
-- Interface estilo Tbao Hub, rename para Gody Hub

-- Carregar Rayfield (UI)
local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

local Window = Rayfield:CreateWindow({
    Name = "ðŸ’œ Gody Hub",
    LoadingTitle = "Carregando Gody Hub",
    LoadingSubtitle = "By ChatGPT",
    ConfigurationSaving = {
       Enabled = false,
    },
    Discord = {
       Enabled = false,
    },
    KeySystem = false,
})

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

local Config = {
    ESPEnabled = true,
    TeamCheck = true,
    AuraColor = Color3.fromRGB(255, 0, 255),
}

local ESPTab = Window:CreateTab("ESP", 4483362458)

ESPTab:CreateToggle({
    Name = "Ativar ESP",
    CurrentValue = true,
    Callback = function(value)
        Config.ESPEnabled = value
    end,
})

ESPTab:CreateToggle({
    Name = "Team Check",
    CurrentValue = true,
    Callback = function(value)
        Config.TeamCheck = value
    end,
})

ESPTab:CreateColorPicker({
    Name = "Cor da Aura (Highlight)",
    Color = Config.AuraColor,
    Callback = function(color)
        Config.AuraColor = color
    end,
})

-- FunÃ§Ã£o para aplicar highlight (aura)
local function ApplyHighlight(player)
    if not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then return end
    if player == LocalPlayer then return end
    if Config.TeamCheck and player.Team == LocalPlayer.Team then return end

    local char = player.Character
    local highlight = char:FindFirstChild("ESP_Highlight")

    if not highlight then
        highlight = Instance.new("Highlight", char)
        highlight.Name = "ESP_Highlight"
        highlight.FillTransparency = 0.5
        highlight.OutlineTransparency = 0.2
        highlight.OutlineColor = Color3.new(1, 1, 1)
    end
    highlight.FillColor = Config.AuraColor
end

-- Atualizar ESP em cada frame
RunService.RenderStepped:Connect(function()
    if not Config.ESPEnabled then
        for _, player in ipairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character then
                local highlight = player.Character:FindFirstChild("ESP_Highlight")
                if highlight then
                    highlight:Destroy()
                end
            end
        end
        return
    end

    for _, player in ipairs(Players:GetPlayers()) do
        pcall(function()
            ApplyHighlight(player)
        end)
    end
end)
